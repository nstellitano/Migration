<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">

    <title>Migration as an Instrument for International Development </title>
    <meta charset="UTF-8">

</head>

<!--Load Libraries-->
<script src="js/d3.min.js"></script>
<script src="js/topojson.v1.min.js"></script>
<script src="js/colorbrewer.js"></script>
<script src = "http://d3js.org/queue.v1.min.js"></script>
<script src="libs/jquery/jquery-2.1.1.min.js" charset="utf-8"></script>


<!-- add own vis classes-->
<script src = "js/map.js"></script>
<script src = "js/scatter.js"></script>

<!--Stylesheets-->
<link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/colorbrewer.css">
<!--<link rel="stylesheet" type = "text/css" href="css/960_12_col.css" />-->
<!--<link rel="stylesheet" type = "text/css" href="css/960_24_col.css" />-->
<!--&lt;!&ndash; Get some nice font&ndash;&gt;-->
<link href='http://fonts.googleapis.com/css?family=PT+Sans:400,700' rel='stylesheet' type='text/css'>

<!-- add own stylesheet-->
<link rel="stylesheet" type="text/css" href="css/myStyle.css">




<body>

<!--Setup the overall structure of the website-->
<div class = "container">
    <div id="header" class="header">
        <h1>Migration as an Instrument for International Development</h1>
            <div id="nav">
                <ul>
                    <li><a href="">Home</a></li>
                    <li><a href="">About</a></li>
                    <li><a href="">Video</a></li>
                    <li><a href="">Authors</a></li>
                </ul>
            </div>
    </div>




        <div  id = "dashboard" class="dashboard">
            <form>
               <label> Type of Country:</label>
                <input type="radio" name="layout" value="OECD" id="OECD"/><label>OECD</label>
                <input type="radio" name="layout" value="NONOECD"/> <label>NON-OECD</label>

<p></p>
                Characteristic:
                <label><input type="radio" name="layout" value="Migrant" id = "Migrant"> Migrant Stock</label>
                <label><input type="radio" name="layout" value="Remittance" > Remittance</label>
                <label><input type="radio" name="layout" value="Aid"> Aid</label>
                <label><input type="radio" name="layout" value="Trade"> Trade</label>
                <label><input type="radio" name="layout" value="Wage"> Wage Rate</label>
            </form>

        </div>


    <div  id = "country_list" class="country_list">
        <p><b><u>Selected Countries</u></b></p>

            Displays Selected Countries

        </p>
    </div>

    <div  id = "world_map" class="world_map">
    </div>

    <div  id = "graph_1" class="graph grid_8">
        <p>Graph 1</p>
        <p>Bar Graph: NON OECD Avg Wage vs Increased Avg Wage</p>
    </div>

    <div  id = "graph_2" class="graph grid_8">
        <p>Graph 2</p>
        <p>Bar Graph: Top 10 Migration Countries by Migrant Stock </p>
    </div>
    <p>
    <div  id = "scatterVis" class="graph grid_8">
        <b>Skill Level:</b>
        <input name="a" value="lowskill" type="checkbox" checked>Low Skill
        <input name="a" value="medskill" type="checkbox" checked >Medium Skill
        <input name="a" value="highskill" type="checkbox" checked >High Skill
    </div>
    </p>
    <div  id = "footers" class = "footers" >
        <p>Copyright etc...</p>
    </div>
</div>



<script>
$(function() {


   // d3.select.("#country_list").write("test");
    //Create EventHandler
    var MyEventHandler = new Object();

    var cdata, ccapitals, alldata;

    //------------Load the Data and begin-------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------

    queue()
            .defer(d3.csv, "data/countries-data.csv")
            .defer(d3.json, "data/capitals.json")
            .defer(d3.json, "data/master_data_set.json")
            .await(ready);

    //Ready function takes the data files loaded via the queue function and begins with loading the WorldMap
    function ready(error, countries, capitals, AllData) {
        cdata = countries;
        ccapitals = capitals;
        alldata = AllData;

        //Make a WorldMap via the worldmap object
        world_map = new WorldMap(d3.select("#world_map"), cdata, ccapitals, alldata, MyEventHandler);


console.log(capitals)

        var scatter_vis = new ScatterVis(d3.select("#scatterVis"), alldata, MyEventHandler);




    //------------Events-------------------------------------------------------------------------------------------------------------------------------
    //-------------------------------------------------------------------------------------------------------------------------------------------------

    $(MyEventHandler).bind("selection", function (event, name) {
        console.log(name);
        //Draw Graphs
        //Draw Lines from each country
        world_map.draw_arcData(name)
        changeDivHTML()
    });

    d3.selectAll("input").on("change", function()
    {

            world_map.heatmap(this);
            changeDivHTML(this);

    });

    function changeDivHTML(radio)
    {

        //clear current list
        document.getElementById('country_list').innerHTML = ("<p><b><u>Selected Countries</u></b></p>");

        var previousInnerHTML = new String();

        previousInnerHTML = document.getElementById('country_list').innerHTML;

        if(d3.select(radio).attr("value") == "OECD") {
            //Filter data maybe call world_map.migration() or something...
            //but for now...)
            for (i = 0; i < 20; i++) {
                previousInnerHTML = previousInnerHTML.concat("<h5>" + alldata._children[i].name + "<h5>");
            }

        }

        if(d3.select(radio).attr("value") == "Migrant" || d3.select(radio).attr("value") == "Remittance" || d3.select(radio).attr("value") == "Aid") {

            for (i = 0; i < 195; i++) {
                previousInnerHTML = previousInnerHTML.concat("<h5>" + alldata._children[1]._children[i].name + "<h5>");
            }

        }
        document.getElementById('country_list').innerHTML = previousInnerHTML;

    }



    };


})
</script>

</body>
</html>
